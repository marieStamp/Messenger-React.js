(this.webpackJsonpgbreact=this.webpackJsonpgbreact||[]).push([[0],{113:function(e,t,c){},114:function(e,t,c){},125:function(e,t,c){},126:function(e,t,c){},129:function(e,t,c){},132:function(e,t,c){},133:function(e,t,c){},134:function(e,t,c){"use strict";c.r(t);var n,a=c(0),r=c(40),s=c.n(r),i=(c(113),c(114),c(25)),u=c(45),o=c(4),j=c(22),b=c(26),l=c(28),O=c(1),d=c.n(O),h=c(6),f=c(91),p=c(61),m=Object(f.a)({apiKey:"AIzaSyD4NhO2foNc0OYJB6Y4rbnKrVmT1bq5bKc",authDomain:"gb-reactjs-33905.firebaseapp.com",projectId:"gb-reactjs-33905",storageBucket:"gb-reactjs-33905.appspot.com",messagingSenderId:"903813555749",appId:"1:903813555749:web:cc34c787a3177aa0b041cc"}),x=Object(p.b)(m),v=function(){var e=Object(h.a)(d.a.mark((function e(t,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(x,t,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(d.a.mark((function e(t,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.c)(x,t,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),S=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.d)(x);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=Object(l.a)(m),E=Object(l.d)(N,"user"),y=Object(l.d)(N,"chats"),k=Object(l.d)(N,"messages"),w=function(e){return Object(l.d)(N,"chats/".concat(e))},I="CHATS::ADD_CHAT",C="CHATS::DELETE_CHAT",L="CHATS::SET_CHATS",_=function(e){return function(t){var c;Object(l.e)((c=e.id,Object(l.d)(N,"messages/".concat(c))),{empty:!0}),Object(l.e)(w(e.id),e)}},T=function(){return function(e){Object(l.b)(y,(function(t){console.log(t);var c=[];t.forEach((function(e){c.push(e.val())})),e(function(e){return{type:L,payload:e}}(c))}))}},A="User",D="ChatBot",F=0,R=1,G=2,U=3,B=c(176),H="MESSAGES::ADD_MESSAGE",M="MESSAGES::DELETE_MESSAGE",q=function(e,t){return{type:H,payload:{chatId:e,message:t}}},P={},K="PROFILE::TOGGLE_CHECKBOX",Q="PROFILE::CHANGE_NAME",Y="PROFILE::SIGN_IN",J="PROFILE::SIGN_OUT",V={type:K},W={checkbox:!1,name:"default name",authed:!1},X=[],z=c(93),Z=c(92),$=c.n(Z),ee=c(80),te="FOOD::REQUEST_LOADING",ce="FOOD::REQUEST_FAILURE",ne="FOOD::REQUEST_SUCCESS",ae={foodList:[],request:{status:F,error:""}},re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,se={key:"gbMessenger",storage:$.a,blacklist:["profile","food"]},ie=Object(ee.a)(se,Object(u.b)({chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload;switch(c){case I:return[].concat(Object(j.a)(e),[n]);case C:return e.filter((function(e){return e.id!==n.chatId}));case L:return n;default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(b.a)(Object(b.a)({},e),{},{checkbox:!e.checkbox});case Q:return Object(b.a)(Object(b.a)({},e),{},{name:t.payload});case Y:return Object(b.a)(Object(b.a)({},e),{},{authed:!0});case J:return Object(b.a)(Object(b.a)({},e),{},{authed:!1});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,c=t.payload,n=t.type;switch(n){case H:return Object(b.a)(Object(b.a)({},e),{},Object(o.a)({},c.chatId,[].concat(Object(j.a)(e[c.chatId]),[c.message])));case M:var a=Object(b.a)({},e);return a[c.chatId]=a[c.chatId].filter((function(e){return e.id!==c.idToDelete})),a;case I:return Object(b.a)(Object(b.a)({},e),{},Object(o.a)({},c.id,[]));case C:var r=Object(b.a)({},e);return delete r[c.chatId],r;default:return e}},food:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload;switch(c){case te:return Object(b.a)(Object(b.a)({},e),{},{request:Object(b.a)(Object(b.a)({},e.request),{},{status:R})});case ne:return Object(b.a)(Object(b.a)({},e),{},{foodList:n,request:{error:"",status:G}});case ce:return Object(b.a)(Object(b.a)({},e),{},{request:{error:n,status:U}});default:return e}}})),ue=Object(u.d)(ie,re(Object(u.a)(z.a))),oe=Object(ee.b)(ue),je=c(12),be=c(34),le=c(18),Oe=(c(125),c(173)),de=c(175),he=(c(126),c(3)),fe=function(e){var t=e.chat,c=Object(i.d)();return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(de.a,{className:"listItem",children:Object(he.jsx)(be.c,{style:function(e){return{color:e.isActive?"red":"blue"}},to:"/chats/".concat(t.id),children:t.name})}),Object(he.jsx)("button",{className:"dlt_button",onClick:function(){var e;c((e=t.id,{type:C,payload:{chatId:e}}))},children:"delete"})]})},pe=function(e){return e.chats},me=function(){var e=Object(i.e)(pe),t=Object(i.d)(),c=Object(a.useState)(""),n=Object(je.a)(c,2),r=n[0],s=n[1];Object(a.useEffect)((function(){t(T())}),[t]);return Object(he.jsxs)("div",{className:"chatsListSide",children:[Object(he.jsx)("h3",{children:"Chats list"}),Object(he.jsx)("div",{className:"chatsList",children:e.map((function(e){return Object(he.jsx)("div",{className:"chatsList_item",children:Object(he.jsx)(fe,{chat:e})},e.id)}))}),Object(he.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=Object(B.a)();t(_({name:r,id:c})),s("")},children:[Object(he.jsx)(Oe.a,{value:r,onChange:function(e){s(e.target.value)}}),Object(he.jsx)("button",{className:"addChat",children:"Add chat"})]})]})},xe=function(e){var t=e.onSubmit,c=e.error,n=e.loading,r=Object(a.useState)(""),s=Object(je.a)(r,2),i=s[0],u=s[1],o=Object(a.useState)(""),j=Object(je.a)(o,2),b=j[0],l=j[1];return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsxs)("form",{className:"signForm",onSubmit:function(e){e.preventDefault(),t(i,b),u(""),l("")},children:[Object(he.jsx)("input",{className:"signInput",type:"text",value:i,onChange:function(e){u(e.target.value)}}),Object(he.jsx)("input",{className:"signInput",type:"password",value:b,onChange:function(e){l(e.target.value)}}),Object(he.jsx)("input",{className:"signBtn",type:"submit",disabled:n})]}),c&&Object(he.jsx)("h4",{children:c})]})},ve=function(){var e=Object(a.useState)(""),t=Object(je.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!1),s=Object(je.a)(r,2),i=s[0],u=s[1],o=function(){var e=Object(h.a)(d.a.mark((function e(t,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,g(t,c);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),n(e.t0.message);case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,6,10,13]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("h3",{children:"HOME"}),Object(he.jsx)(xe,{onSubmit:o,error:c,loading:i}),Object(he.jsx)(be.b,{to:"/signup",children:Object(he.jsx)("button",{className:"dlt_button signout",children:"Sign Up"})})]})},ge=function(e){return e.profile.name},Se=function(e){return e.profile.authed},Ne=Object(i.b)((function(e){return{name:e.profile.name,checkboxValue:e.profile.checkbox}}),(function(e){return{changeChecked:function(){return e(V)},setName:function(t){return e({type:Q,payload:t})}}}))((function(e){var t=e.showName,c=e.setName,n=e.changeChecked,r=Object(i.e)(ge,i.c),s=Object(a.useState)(r),u=Object(je.a)(s,2),o=u[0],j=u[1];Object(a.useEffect)((function(){return Object(l.b)(E,(function(e){var t=e.val();c((null===t||void 0===t?void 0:t.name)||"")}))}),[c]);var b=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("h3",{children:"Profile"}),Object(he.jsx)("input",{type:"checkbox",checked:t,onChange:function(){n()}}),Object(he.jsx)("span",{children:"Show name"}),Object(he.jsxs)("form",{className:"signForm",onSubmit:function(e){e.preventDefault(),Object(l.e)(E,{name:o})},children:[Object(he.jsx)("input",{className:"signInput",type:"text",value:o,onChange:function(e){j(e.target.value)}}),Object(he.jsx)("input",{className:"signBtn",type:"submit"})]}),Object(he.jsx)("button",{className:"dlt_button signout",onClick:b,children:"SIGN OUT"})]})})),Ee=(c(129),c(178)),ye=c(95),ke=c.n(ye),we=function(e){var t=e.onSend,c=Object(a.useState)(""),n=Object(je.a)(c,2),r=n[0],s=n[1],i=Object(a.useRef)();return Object(a.useEffect)((function(){var e;null===(e=i.current)||void 0===e||e.focus()}),[]),Object(he.jsxs)("form",{onSubmit:function(e){var c;e.preventDefault(),t({author:A,text:r,id:Object(B.a)()}),null===(c=i.current)||void 0===c||c.focus(),s("")},children:[Object(he.jsx)(Oe.a,{className:"textField",id:"outlined-basic",label:"Your message",variant:"outlined",value:r,onChange:function(e){s(e.target.value)},inputRef:i}),Object(he.jsx)(Ee.a,{className:"btnSubmit",variant:"contained",type:"submit",sx:{color:"lightblue",m:1},endIcon:Object(he.jsx)(ke.a,{}),children:"Send"})]})},Ie=function(e){var t=e.messages;return Object(he.jsx)("div",{className:"messageWrap",children:t.map((function(e){return Object(he.jsxs)("div",{className:"message",children:[Object(he.jsx)("div",{className:"message_author",children:e.author}),Object(he.jsx)("div",{className:"textWrap",children:Object(he.jsx)("div",{className:"message_text",children:e.text})})]},e.id)}))})};c(132);function Ce(e){var t=e.msgs,c=(e.sendMessage,Object(le.i)().chatId),n=Object(a.useCallback)((function(e){Object(l.c)(function(e){return Object(l.d)(N,"messages/".concat(e,"/messagesList"))}(c),e)}),[c]);return t[c]?Object(he.jsxs)("div",{className:"chats",children:[Object(he.jsx)(me,{}),Object(he.jsxs)("div",{children:[Object(he.jsx)(Ie,{messages:t[c]}),Object(he.jsx)("div",{className:"form",children:Object(he.jsx)(we,{onSend:n})})]})]}):Object(he.jsx)(le.a,{replace:!0,to:"/chats"})}var Le={sendMessage:function(e,t){return function(c){c(q(e,t)),t.author!==D&&(n&&clearTimeout(n),n=setTimeout((function(){var t={author:D,id:Object(B.a)(),text:"We answer You in a minute, please, wait!"};c(q(e,t))}),3e3))}}},_e=Object(i.b)((function(e){return{messages:e.messages}}),Le)(Ce),Te=c(179),Ae=function(e){return e.food.foodList},De=function(e){return e.food.request.status===R},Fe=function(e){return e.food.request.error},Re=(c(133),function(){var e=Object(i.d)(),t=Object(i.e)(Ae),c=Object(i.e)(De),n=Object(i.e)(Fe),a=function(){var t=Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(function(){var e=Object(h.a)(d.a.mark((function e(t){var c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:te}),e.prev=1,e.next=4,fetch("https://api.openbrewerydb.org/breweries");case 4:if(c=e.sent,console.log(c),c.ok){e.next=8;break}throw new Error("not ok");case 8:return e.next=10,c.json();case 10:n=e.sent,t({type:ne,payload:n}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),t((a=e.t0.message,{type:ce,payload:a}));case 18:case"end":return e.stop()}var a}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("h3",{children:"Breweries"}),c?Object(he.jsx)(Te.a,{}):Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("button",{className:"foodBtn",onClick:a,children:"REQUEST"}),!!n&&Object(he.jsxs)("h4",{children:["ERROR: ",n]}),Object(he.jsx)("ul",{children:t.map((function(e){return Object(he.jsx)("li",{className:"foodList",children:e.name},e.id)}))})]})]})}),Ge=function(e){var t=e.children;return Object(i.e)(Se)?t:Object(he.jsx)(le.a,{to:"/",replace:!0})},Ue=function(){return Object(i.e)(Se)?Object(he.jsx)(le.a,{to:"/chats",replace:!0}):Object(he.jsx)(le.b,{})},Be=function(){var e=Object(a.useState)(""),t=Object(je.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!1),s=Object(je.a)(r,2),i=s[0],u=s[1],o=function(){var e=Object(h.a)(d.a.mark((function e(t,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,v(t,c);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),n(e.t0.message);case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,6,10,13]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(xe,{onSubmit:o,error:c,loading:i}),Object(he.jsx)(be.b,{to:"/",children:Object(he.jsx)("button",{className:"dlt_button signout",children:"Sign In"})})]})},He=function(){var e=Object(i.d)(),t=Object(a.useState)({}),c=Object(je.a)(t,2),n=c[0],r=c[1];return Object(a.useEffect)((function(){var t=x.onAuthStateChanged((function(t){e(t?{type:Y}:{type:J})}));return function(){return t()}}),[e]),Object(a.useEffect)((function(){Object(l.b)(k,(function(e){var t={};e.forEach((function(e){t[e.key]=Object.values(e.val().messagesList||{})})),r(t)}))}),[]),Object(he.jsxs)(be.a,{children:[Object(he.jsxs)("ul",{className:"links",children:[Object(he.jsx)("li",{className:"mainLinks",children:Object(he.jsx)(be.b,{className:"eachLink",to:"/",children:"Home"})}),Object(he.jsx)("li",{className:"mainLinks",children:Object(he.jsx)(be.b,{className:"eachLink",to:"/chats",children:"Chats"})}),Object(he.jsx)("li",{className:"mainLinks",children:Object(he.jsx)(be.b,{className:"eachLink",to:"/profile",children:"Profile"})}),Object(he.jsx)("li",{className:"mainLinks",children:Object(he.jsx)(be.b,{className:"eachLink",to:"/food",children:"Breweries"})})]}),Object(he.jsxs)(le.e,{children:[Object(he.jsx)(le.c,{path:"/",element:Object(he.jsx)(Ue,{}),children:Object(he.jsx)(le.c,{path:"/",element:Object(he.jsx)(ve,{})})}),Object(he.jsx)(le.c,{path:"/signup",element:Object(he.jsx)(Ue,{}),children:Object(he.jsx)(le.c,{path:"",element:Object(he.jsx)(Be,{})})}),Object(he.jsxs)(le.c,{path:"chats",children:[Object(he.jsx)(le.c,{index:!0,element:Object(he.jsx)(Ge,{children:Object(he.jsx)(me,{})})}),Object(he.jsx)(le.c,{path:":chatId",element:Object(he.jsx)(Ge,{children:Object(he.jsx)(_e,{msgs:n})})})]}),Object(he.jsx)(le.c,{path:"profile",element:Object(he.jsx)(Ge,{children:Object(he.jsx)(Ne,{})})}),Object(he.jsx)(le.c,{path:"food",element:Object(he.jsx)(Re,{})}),Object(he.jsx)(le.c,{path:"*",element:Object(he.jsx)("main",{children:"404 Not Found"})})]})]})},Me=c(96);var qe=function(){return Object(he.jsx)("div",{className:"App",children:Object(he.jsx)(i.a,{store:ue,children:Object(he.jsx)(Me.a,{persistor:oe,loading:Object(he.jsx)(Te.a,{}),children:Object(he.jsx)("main",{children:Object(he.jsx)(He,{})})})})})};s.a.render(Object(he.jsx)(qe,{}),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.0bc33d1a.chunk.js.map